import{d as e,ah as t,r as o,W as n,as as a,E as i,ad as u,am as l,a$ as s,o as r,c as d,e as v,aa as f,n as c,Z as p}from"./index-13030047.js";const g=v("div",null,"sticky",-1),m=e({__name:"Sticky",props:{offset:t.number.def(0),zIndex:t.number.def(999),className:t.string.def(""),position:{type:String,validator:function(e){return-1!==["top","bottom"].indexOf(e)},default:"top"}},setup(e){const t=e,m=o("auto"),x=o("auto"),h=o(!1),y=n(),w=n(),{height:C}=a();i((()=>{var e;x.value=(null==(e=y.value)?void 0:e.getBoundingClientRect().height)+"px",w.value=b(y.value,!0),u(w,"scroll",B),u("resize",I),B()})),l((()=>{B()}));const z=(e,t)=>{if(!s)return!1;const o=((e,t)=>{var o;if(!s||!e||!t)return"";t.replace(/-(\w)/g,((e,t)=>t?t.toUpperCase():""));try{const n=e.style[t];if(n)return n;const a=null==(o=document.defaultView)?void 0:o.getComputedStyle(e,"");return a?a[t]:""}catch{return e.style[t]}})(e,{undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)]);return["scroll","auto","overlay"].some((e=>o.includes(e)))},b=(e,t)=>{if(!s)return;let o=e;for(;o;){if([window,document,document.documentElement].includes(o))return window;if(z(o,t))return o;o=o.parentNode}return o},B=()=>{var e,o;if(m.value=y.value.getBoundingClientRect().width+"px","top"===t.position){const o=null==(e=y.value)?void 0:e.getBoundingClientRect().top;if(void 0!==o&&o<t.offset)return void R();S()}else{const e=null==(o=y.value)?void 0:o.getBoundingClientRect().bottom;if(void 0!==e&&e>C.value-t.offset)return void R();S()}},I=()=>{h.value&&y.value&&(m.value=y.value.getBoundingClientRect().width+"px")},R=()=>{h.value||(h.value=!0)},S=()=>{h.value&&(m.value="auto",h.value=!1)};return(t,o)=>(r(),d("div",{style:p({height:x.value,zIndex:e.zIndex}),ref_key:"refSticky",ref:y},[v("div",{class:c(e.className),style:p({top:"top"===e.position?e.offset+"px":"",bottom:"top"!==e.position?e.offset+"px":"",zIndex:e.zIndex,position:h.value?"fixed":"static",width:m.value,height:x.value})},[f(t.$slots,"default",{},(()=>[g]))],6)],4))}});export{m as _};
